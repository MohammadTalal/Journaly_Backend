(this["webpackJsonpjournal-capstone-project"]=this["webpackJsonpjournal-capstone-project"]||[]).push([[0],{133:function(e,t,n){},134:function(e,t,n){},172:function(e,t,n){},174:function(e,t,n){},176:function(e,t,n){},177:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){},287:function(e,t,n){},288:function(e,t,n){},289:function(e,t,n){},290:function(e,t,n){},291:function(e,t,n){},292:function(e,t,n){},293:function(e,t,n){},294:function(e,t,n){},356:function(e,t,n){},371:function(e,t,n){},372:function(e,t,n){},373:function(e,t,n){},375:function(e,t,n){"use strict";n.r(t);var a,r=n(1),c=n.n(r),s=n(13),i=n.n(s),o=(n(172),n(9)),l=n(15),u=n(19),j=n(7),d=n.n(j),b=n(10),p=n(68),m=n.n(p),h=(n(174),n(2)),O=function(e){return Object(h.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children})},x=n(29),f=n.n(x),g=n(27),v=n(386),S=(n(176),function(e){return i.a.createPortal(Object(h.jsx)("div",{className:"backdrop",onClick:e.onClick}),document.getElementById("backdrop-hook"))}),y=(n(177),function(e){var t=Object(h.jsxs)("div",{className:"modal ".concat(e.className),style:e.style,children:[Object(h.jsx)("header",{className:"modal__header ".concat(e.headerClass),children:Object(h.jsx)("h2",{children:e.header})}),Object(h.jsxs)("form",{onSubmit:e.onSubmit?e.onSubmit:function(e){return e.preventDefault()},children:[Object(h.jsx)("div",{className:"modal__content ".concat(e.contentClass),children:e.children}),Object(h.jsx)("footer",{className:"modal__footer ".concat(e.footerClass),children:e.footer})]})]});return i.a.createPortal(t,document.getElementById("modal-hook"))}),w=function(e){return Object(h.jsxs)(c.a.Fragment,{children:[e.show&&Object(h.jsx)(S,{onClick:e.onCancel}),Object(h.jsx)(v.a,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:"modal",children:Object(h.jsx)(y,Object(g.a)({},e))})]})},N=(n(180),n(181),function(e){return Object(h.jsx)(w,{onCancel:e.onClear,header:"An Error Occurred!",show:!!e.error,footer:Object(h.jsx)("button",{className:"btn",onClick:e.onClear,children:"Okay"}),children:Object(h.jsx)("p",{children:e.error})})}),D=(n(182),function(e){return Object(h.jsx)("div",{className:"".concat(e.asOverlay&&"loading-spinner__overlay"),children:Object(h.jsx)("div",{className:"lds-dual-ring"})})}),C=function(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(),s=Object(o.a)(c,2),i=s[0],l=s[1],u=Object(r.useRef)([]),j=Object(r.useCallback)(function(){var e=Object(b.a)(d.a.mark((function e(t){var n,r,c,s,i,o,j=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j.length>1&&void 0!==j[1]?j[1]:"GET",r=j.length>2&&void 0!==j[2]?j[2]:null,c=j.length>3&&void 0!==j[3]?j[3]:{},a(!0),s=new AbortController,u.current.push(s),e.prev=6,e.next=9,fetch(t,{method:n,body:r,headers:c,signal:s.signal});case 9:return i=e.sent,e.next=12,i.json();case 12:if(o=e.sent,u.current=u.current.filter((function(e){return e!==s})),i.ok){e.next=16;break}throw new Error(o.message);case 16:return a(!1),e.abrupt("return",o);case 20:throw e.prev=20,e.t0=e.catch(6),l(e.t0.message),a(!1),e.t0;case 25:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(r.useEffect)((function(){return function(){u.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:n,error:i,sendRequest:j,clearError:function(){l(null)}}},k=Object(r.createContext)({isSignedIn:!1,userId:null,token:null,signIn:function(){},signOut:function(){}}),I=(n(183),function(e){var t=e.comments,n=Object(r.useRef)(null);return Object(r.useEffect)((function(){!function(){var e;null===(e=n.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}()}),[t]),Object(h.jsx)("div",{className:"comment-box",children:0===t.length?Object(h.jsx)("p",{className:"empty",children:"This post not commented yet"}):t.map((function(e,t){return Object(h.jsxs)("div",{className:"comments",ref:n,children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("p",{className:"user",children:e.name}),Object(h.jsx)("p",{className:"message",children:e.comment})]}),Object(h.jsx)("hr",{})]},t)}))})}),E=n(32),T=n(14),_=(n(133),function(e){var t=Object(r.useContext)(k),n=C(),a=n.isLoading,s=n.error,i=n.sendRequest,l=n.clearError,j=Object(r.useState)(""),p=Object(o.a)(j,2),m=p[0],x=p[1],g=Object(r.useState)([]),v=Object(o.a)(g,2),S=v[0],y=v[1],_=Object(r.useState)(!1),F=Object(o.a)(_,2),A=F[0],P=F[1],L=Object(r.useState)(!1),J=Object(o.a)(L,2),U=J[0],R=J[1],q=T.a({comment:T.b().required("Journal Comment Cannot Be Empty!")}),B=Object(E.a)({enableReinitialize:!0,validationSchema:q}),M=function(){P(!1)},Y=function(){var n=Object(b.a)(d.a.mark((function n(){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return P(!1),n.prev=1,n.next=4,i("/api/posts/".concat(e.id),"DELETE",null,{Authorization:"Bearer "+t.token});case 4:z(),e.onDelete(e.id),n.next=10;break;case 8:n.prev=8,n.t0=n.catch(1);case 10:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(){return n.apply(this,arguments)}}(),z=function(){var n=Object(b.a)(d.a.mark((function n(){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return P(!1),n.prev=1,n.next=4,i("/api/favourites/deletewithpost","DELETE",JSON.stringify({postId:e.id,userId:t.userId}),{"Content-Type":"application/json",Authorization:"Bearer "+t.token});case 4:e.onDelete(e.id),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(1);case 9:case"end":return n.stop()}}),n,null,[[1,7]])})));return function(){return n.apply(this,arguments)}}(),V=function(){var n=Object(b.a)(d.a.mark((function n(){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return P(!1),n.prev=1,n.next=4,i("/api/favourites/favourite","DELETE",JSON.stringify({postId:e.id,userId:t.userId}),{"Content-Type":"application/json",Authorization:"Bearer "+t.token});case 4:e.onDelete(e.id),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(1);case 9:case"end":return n.stop()}}),n,null,[[1,7]])})));return function(){return n.apply(this,arguments)}}(),G=function(){var n=Object(b.a)(d.a.mark((function n(a){var r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),n.prev=1,n.next=4,i("/api/comments","POST",JSON.stringify({postId:e.id,userId:t.userId,comment:m,username:"test"}),{"Content-Type":"application/json",Authorization:"Bearer "+t.token});case 4:r=n.sent,y(r.comments),x(""),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),alert("error");case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}();return Object(r.useEffect)((function(){function t(){return(t=Object(b.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i("/api/comments/".concat(e.id));case 3:n=t.sent,y(n.comments),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[i,e.id]),Object(h.jsxs)(c.a.Fragment,{children:[Object(h.jsx)(N,{error:s,onClear:l}),Object(h.jsx)(w,{show:A,onCancel:M,header:"Are you sure?",footerClass:"post-item__modal-actions",footer:Object(h.jsxs)(c.a.Fragment,{children:[Object(h.jsx)("button",{className:"form-btn",onClick:M,children:"CANCEL"}),Object(h.jsx)("button",{className:"form-btn",onClick:e.Delete?V:Y,children:"DELETE"})]}),children:Object(h.jsx)("p",{children:"Are you sure you want to delete this journal?"})}),Object(h.jsxs)("li",{className:"post-item",children:[Object(h.jsxs)(w,{show:U,onCancel:M,header:"Comments",footerClass:"post-item__modal-actions",footer:Object(h.jsx)(c.a.Fragment,{children:Object(h.jsx)("button",{className:"form-btn",style:{marginTop:"0px"},onClick:function(){R(!1)},children:"CANCEL"})}),children:[Object(h.jsx)("div",{className:"all-comments",children:Object(h.jsx)(I,{comments:S})}),t.isSignedIn?Object(h.jsxs)("form",{children:[a&&Object(h.jsx)(D,{asOverlay:!0}),Object(h.jsx)("label",{htmlFor:"comment",children:"Comment:"}),Object(h.jsx)("input",{className:"form-control",type:"text",id:"comment",name:"comment",value:m,autoComplete:"off",onChange:function(e){x(e.target.value)}}),Object(h.jsx)("div",{className:"error",children:B.touched.comment&&B.errors.comment?Object(h.jsx)("div",{children:B.errors.comment}):null}),Object(h.jsx)("button",{className:"form-btn",style:{marginTop:"0px"},onClick:G,disabled:""===m.length,children:"Post"})]}):null]}),Object(h.jsxs)(O,{className:"post-item__content",children:[a&&Object(h.jsx)(D,{}),e.imageUrl&&Object(h.jsx)("div",{className:"post-item__image",children:Object(h.jsx)("img",{src:"".concat(e.imageUrl),alt:e.title})}),Object(h.jsxs)("div",{className:"post-item__info",children:[Object(h.jsxs)("h2",{children:[e.title," | ",f()(e.publishDate).format("MMMM Do YYYY")]}),Object(h.jsx)("p",{children:e.postContent})]}),Object(h.jsxs)("div",{className:"post-item__actions",children:[Object(h.jsx)("div",{className:"post__option",style:{display:"".concat(e.display)},children:Object(h.jsx)(u.b,{className:"links",to:"/journals/".concat(e.id),children:Object(h.jsx)("button",{className:"button-17",children:"EDIT"})})}),Object(h.jsx)("div",{className:"post__option",children:Object(h.jsx)("button",{className:"button-17",onClick:function(){P(!0)},children:"DELETE"})}),Object(h.jsx)("div",{className:"post__option",style:{display:"".concat(e.display)},children:Object(h.jsx)("button",{className:"button-17",onClick:function(){R(!0)},children:"COMMENTS"})})]})]})]})]})}),F=(n(134),function(e){var t=Object(r.useState)(""),n=Object(o.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(0),i=Object(o.a)(s,2),l=i[0],u=i[1],j=5*l,d=e.items.slice(j,j+5).map((function(t){return Object(h.jsx)(_,{id:t.id,imageUrl:t.imageUrl,title:t.title,publishDate:t.publishDate,postContent:t.content,creatorId:t.creator,onDelete:e.onDeletePost,display:e.display,Delete:e.delete},t.id)})),b=Math.ceil(e.items.length/5);return 0===e.items.length?Object(h.jsx)("div",{className:"center",children:Object(h.jsx)(O,{children:Object(h.jsx)("h2",{children:"No Journals To Display"})})}):Object(h.jsxs)("ul",{className:"post-list",children:[Object(h.jsx)("input",{className:"search-bar",type:"text",placeholder:"Search For A Journal By Title...",onChange:function(e){c(e.target.value)}}),""===a&&d,""!==a&&e.items.filter((function(e){return""===a||e.title.toLowerCase().includes(a.toLowerCase())?e:null})).map((function(t){return Object(h.jsx)(_,{id:t.id,imageUrl:t.imageUrl,title:t.title,publishDate:t.publishDate,postContent:t.content,creatorId:t.creator,display:e.display,Delete:e.delete},t.id)})),Object(h.jsx)(m.a,{previousLabel:"Previous",nextLabel:"Next",pageCount:b,onPageChange:function(e){var t=e.selected;u(t)},containerClassName:"paginationBttns",previousLinkClassName:"previousBttn",nextLinkClassName:"nextBttn",disabledClassName:"paginationDisabled",activeClassName:"paginationActive"})]})}),A=function(){var e=Object(r.useState)(),t=Object(o.a)(e,2),n=t[0],a=t[1],s=C(),i=s.isLoading,u=s.error,j=s.sendRequest,p=s.clearError,m=Object(l.h)().userId;Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j("/api/posts/user/".concat(m));case 3:t=e.sent,a(t.posts),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[j,m]);var x=Object(l.g)();return Object(h.jsxs)(c.a.Fragment,{children:[Object(h.jsx)(N,{error:u,onClear:p}),i&&Object(h.jsx)("div",{className:"center",children:Object(h.jsx)(D,{})}),!i&&!n&&Object(h.jsx)("div",{className:"center",children:Object(h.jsxs)(O,{children:[Object(h.jsx)("h2",{children:"No Journals To Display"}),Object(h.jsx)("button",{className:"form-btn",type:"submit",onClick:function(){x.push("/journals/new")},children:"Add New Journal"})]})}),!i&&n&&Object(h.jsx)(F,{items:n,onDeletePost:function(e){a((function(t){return t.filter((function(t){return t.id!==e}))}))}})]})},P=(n(287),function(e){return Object(h.jsx)("header",{className:"main-header",children:e.children})}),L=(n(288),function(e){e.id;var t=C().sendRequest,n=Object(r.useContext)(k),a=Object(l.g)();Object(r.useEffect)((function(){function e(){return(e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t("/api/users/".concat(n.userId));case 3:"deactivate"===e.sent.username[0].status&&(n.signOut(!0),a.push("/auth")),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,n.userId,n.signOut,n,a]);var c=localStorage.getItem("role");return Object(h.jsxs)("ul",{className:"nav-links",children:[Object(h.jsx)("li",{children:"admin"===c?null:Object(h.jsx)(u.c,{to:"/",exact:!0,children:"ALL JOURNALS"})}),n.isSignedIn&&Object(h.jsx)("li",{children:"admin"===c?null:Object(h.jsx)(u.c,{to:"/".concat(n.userId,"/journal"),children:"MY JOURNALS"})}),n.isSignedIn&&Object(h.jsx)("li",{children:"admin"===c?null:Object(h.jsx)(u.c,{to:"/journals/new",children:"ADD NEW JOURNAL"})}),n.isSignedIn&&Object(h.jsx)("li",{children:"admin"===c?null:Object(h.jsx)(u.c,{to:"/favourite",children:"FAVOURITES"})}),!n.isSignedIn&&Object(h.jsx)("li",{children:Object(h.jsx)(u.c,{to:"/auth",children:"AUTHENTICATE"})}),n.isSignedIn&&Object(h.jsx)("li",{children:Object(h.jsx)(u.c,{to:"/profile",children:"PROFILE"})}),n.isSignedIn&&Object(h.jsx)("li",{children:"admin"===c?Object(h.jsx)(u.c,{to:"/admin",children:"ADMIN"}):null}),n.isSignedIn&&Object(h.jsx)("li",{children:Object(h.jsx)("button",{onClick:function(){n.signOut(!0),a.push("/auth")},children:"SIGN OUT"})})]})}),J=(n(289),function(e){var t=Object(h.jsx)(v.a,{in:e.show,timeout:300,classNames:"slide-in-left",mountOnEnter:!0,unmountOnExit:!0,children:Object(h.jsx)("aside",{className:"side-drawer",onClick:e.onClick,children:e.children})});return i.a.createPortal(t,document.getElementById("drawer-hook"))}),U=(n(290),function(e){var t=Object(r.useState)(!1),n=Object(o.a)(t,2),a=n[0],s=n[1],i=JSON.parse(localStorage.getItem("userData")),l=function(){s(!1)};return Object(h.jsxs)(c.a.Fragment,{children:[a&&Object(h.jsx)(S,{onClick:l}),Object(h.jsx)(J,{show:a,onClick:l,children:Object(h.jsx)("nav",{className:"main-navigation__drawer-nav",children:Object(h.jsx)(L,{})})}),Object(h.jsxs)(P,{children:[Object(h.jsxs)("button",{className:"main-navigation__menu-btn",onClick:function(){s(!0)},children:[Object(h.jsx)("span",{}),Object(h.jsx)("span",{}),Object(h.jsx)("span",{})]}),Object(h.jsx)("h1",{className:"main-navigation__title",children:Object(h.jsx)(u.b,{to:"/",children:"Journaly"})}),Object(h.jsx)("nav",{className:"main-navigation__header-nav",children:Object(h.jsx)(L,{id:null==i?"error":i.userId})})]})]})}),R=(n(291),function(){var e=Object(r.useContext)(k),t=C(),n=t.isLoading,a=t.error,s=t.sendRequest,i=t.clearError,u=Object(l.g)(),j=Object(r.useState)(""),p=Object(o.a)(j,2),m=p[0],O=p[1],x=Object(r.useState)(""),v=Object(o.a)(x,2),S=v[0],y=v[1];Object(r.useEffect)((function(){function t(){return(t=Object(b.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s("/api/users/".concat(e.userId));case 3:n=t.sent,O(n.username[0].name),y(n.username[0].imageUrl),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[s,e.userId]);var w={title:"",content:"",image:"",username:m,userimage:S},I=function(){var t=Object(b.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(a=new FormData).append("title",n.title),a.append("content",n.content),a.append("userId",e.userId),a.append("username",n.username),a.append("image",n.image),a.append("userimage",n.userimage),a.append("filterDate",f()(new Date).format("YYYY-MM-DD")),t.next=11,s("/api/posts","POST",a,{Authorization:"Bearer "+e.token});case 11:u.push("/"),t.next=16;break;case 14:t.prev=14,t.t0=t.catch(0);case 16:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}(),_=T.a({title:T.b().required("Journal Title Cannot Be Empty!"),content:T.b().required("Journal Content Cannot Be Empty!")}),F=Object(E.a)({initialValues:w,onSubmit:I,validationSchema:_,enableReinitialize:!0});return Object(h.jsxs)(c.a.Fragment,{children:[Object(h.jsx)(N,{error:a,onClear:i}),Object(h.jsxs)("form",{className:"journal-form",onSubmit:F.handleSubmit,children:[n&&Object(h.jsx)(D,{asOverlay:!0}),Object(h.jsx)("label",{htmlFor:"title",children:"Title:"}),Object(h.jsx)("input",Object(g.a)({className:"form-control",type:"text",id:"title",name:"title"},F.getFieldProps("title"))),Object(h.jsx)("div",{className:"error",children:F.touched.title&&F.errors.title?Object(h.jsx)("div",{children:F.errors.title}):null}),Object(h.jsx)("label",{htmlFor:"content",children:"Journal Content:"}),Object(h.jsx)("textarea",Object(g.a)({className:"form-control",id:"content",rows:"10",name:"content",placeholder:"Type daily journal here..."},F.getFieldProps("content"))),Object(h.jsx)("div",{className:"error",children:F.touched.content&&F.errors.content?Object(h.jsx)("div",{children:F.errors.content}):null}),Object(h.jsx)("input",{type:"file",name:"image",accept:".jpg,.png,.jpeg",onChange:function(e){return F.setFieldValue("image",e.target.files[0])}}),Object(h.jsx)("button",{className:"form-btn",type:"submit",disabled:!(F.dirty&&F.isValid),children:"Add Journal"})]})]})}),q=(n(292),function(){var e,t=Object(r.useContext)(k),n=Object(r.useState)(!0),a=Object(o.a)(n,2),s=a[0],i=a[1],l=Object(r.useState)(!1),u=Object(o.a)(l,2),j=u[0],p=u[1],m=C(),x=m.isLoading,f=m.error,v=m.sendRequest,S=m.clearError,y=function(){p(!1)},I=function(){var e=Object(b.a)(d.a.mark((function e(n){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=21;break}return e.prev=1,e.next=4,v("/api/users/signin","POST",JSON.stringify({email:n.email,password:n.password}),{"Content-Type":"application/json"});case 4:if(a=e.sent,localStorage.setItem("role",a.role),localStorage.setItem("status",a.status),"deactivate"!==localStorage.getItem("status")){e.next=14;break}return p(!0),localStorage.removeItem("role"),localStorage.removeItem("status"),e.abrupt("return");case 14:t.signIn(a.userId,a.token);case 15:e.next=19;break;case 17:e.prev=17,e.t0=e.catch(1);case 19:e.next=31;break;case 21:return e.prev=21,e.next=24,v("/api/users/signup","POST",JSON.stringify({name:n.name,email:n.email,password:n.password}),{"Content-Type":"application/json"});case 24:r=e.sent,localStorage.setItem("role",r.role),t.signIn(r.userId,r.token),e.next=31;break;case 29:e.prev=29,e.t1=e.catch(21);case 31:case"end":return e.stop()}}),e,null,[[1,17],[21,29]])})));return function(t){return e.apply(this,arguments)}}();e=s?T.a({name:T.b().notRequired(),email:T.b().email("Invalid Email Format!").required("Email Required!"),password:T.b().min(8,"Password must be at least 8 characters").required("Password Required!")}):T.a({name:T.b().required("Name Required!"),email:T.b().email("Invalid Email Format!").required("Email Required!"),password:T.b().min(8,"Password must be at least 8 characters").required("Password Required!")});var _=Object(E.a)({initialValues:{name:"",email:"",password:""},onSubmit:I,validationSchema:e});return Object(h.jsxs)(c.a.Fragment,{children:[Object(h.jsx)(N,{error:f,onClear:S}),Object(h.jsxs)(O,{className:"form-box",children:[x&&Object(h.jsx)(D,{asOverlay:!0}),Object(h.jsx)(w,{show:j,onCancel:y,header:"User Status",footerClass:"post-item__modal-actions",footer:Object(h.jsx)(c.a.Fragment,{children:Object(h.jsx)("button",{className:"form-btn",style:{marginTop:"0px"},onClick:y,children:"CANCEL"})}),children:Object(h.jsx)("h2",{style:{textAlign:"center"},children:"Your Account has been Deactivated"})}),";",Object(h.jsx)("h2",{children:s?"Sign In":"Sign Up"}),Object(h.jsx)("h3",{children:s?"Welcome Back":"It's Quick and Easy"}),Object(h.jsxs)("form",{autoComplete:"off",onSubmit:_.handleSubmit,children:[!s&&Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{htmlFor:"name",children:"Full Name"}),Object(h.jsx)("input",Object(g.a)({className:"form-control",type:"text",id:"name",name:"name"},_.getFieldProps("name"))),Object(h.jsx)("div",{className:"error",children:_.touched.name&&_.errors.name?Object(h.jsx)("div",{children:_.errors.name}):null})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{htmlFor:"email",children:"Email Address"}),Object(h.jsx)("input",Object(g.a)({className:"form-control",type:"email",id:"email",name:"email"},_.getFieldProps("email"))),Object(h.jsx)("div",{className:"error",children:_.touched.email&&_.errors.email?Object(h.jsx)("div",{children:_.errors.email}):null})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{htmlFor:"password",children:"Password"}),Object(h.jsx)("input",Object(g.a)({className:"form-control",type:"password",id:"password",name:"password"},_.getFieldProps("password"))),Object(h.jsx)("div",{className:"error",children:_.touched.password&&_.errors.password?Object(h.jsx)("div",{children:_.errors.password}):null})]}),Object(h.jsx)("button",{className:"form-btn",type:"submit",disabled:!(_.dirty&&_.isValid),children:s?"SIGN IN":"SIGN UP"})]}),Object(h.jsx)("button",{className:"switch-form",onClick:function(){_.resetForm(),i(!s)},children:s?"Create a New Account":"Click Here To Sign In"})]})]})}),B=(n(293),function(e){return Object(h.jsx)("div",{className:"profileImg ".concat(e.className),style:e.style,children:Object(h.jsx)("img",{src:"".concat(e.image),alt:e.alt,style:{width:e.width,height:e.width}})})}),M=(n(294),function(e){var t={id:"u1",name:e.username,image:e.userImage,places:3};return Object(h.jsxs)("div",{className:"user-item__content",children:[Object(h.jsx)("div",{className:"user-item__image",children:Object(h.jsx)(B,{image:t.image,alt:t.name})}),Object(h.jsx)("div",{className:"user-item__info",children:Object(h.jsx)("h2",{children:t.name})})]})}),Y=n(106),z=n(105),V=n(107),G=function(e){var t=Object(r.useContext)(k),n=C(),a=n.sendRequest,s=n.isLoading,i=Object(r.useState)(!1),l=Object(o.a)(i,2),u=l[0],j=l[1],p=Object(r.useState)(!1),m=Object(o.a)(p,2),x=m[0],g=m[1],v=Object(r.useState)(!1),S=Object(o.a)(v,2),y=S[0],N=S[1],_=Object(r.useState)(""),F=Object(o.a)(_,2),A=F[0],P=F[1],L=Object(r.useState)([]),J=Object(o.a)(L,2),U=J[0],R=J[1],q=Object(r.useState)(0),B=Object(o.a)(q,2),G=B[0],H=B[1],W=function(){j(!1)},Q=function(){var n=Object(b.a)(d.a.mark((function n(r){var c;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.prev=1,n.next=4,a("/api/comments","POST",JSON.stringify({postId:e.id,userId:t.userId,comment:A,username:e.username}),{"Content-Type":"application/json",Authorization:"Bearer "+t.token});case 4:c=n.sent,R(c.comments),P(""),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),alert("error");case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}(),K=T.a({comment:T.b().required("Journal Comment Cannot Be Empty!")}),X=Object(E.a)({enableReinitialize:!0,validationSchema:K}),Z=function(){var n=Object(b.a)(d.a.mark((function n(){var r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a("/api/favourites","POST",JSON.stringify({userId:t.userId,postId:e.id,title:e.title,content:e.postContent,username:e.username,publishDate:e.publishDate,imageUrl:e.imageUrl}),{"Content-Type":"application/json",Authorization:"Bearer "+t.token});case 3:r=n.sent,N(r.disable),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(0);case 9:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}(),$=function(){var n=Object(b.a)(d.a.mark((function n(){var r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a("/api/favourites","DELETE",JSON.stringify({postId:e.id,userId:t.userId}),{"Content-Type":"application/json",Authorization:"Bearer "+t.token});case 3:r=n.sent,N(r.disable),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(0);case 9:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}(),ee=function(){var n=Object(b.a)(d.a.mark((function n(){var r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a("/api/likes","POST",JSON.stringify({postId:e.id,userId:t.userId}),{"Content-Type":"application/json",Authorization:"Bearer "+t.token});case 3:r=n.sent,ne(),H(r.res),n.next=10;break;case 8:n.prev=8,n.t0=n.catch(0);case 10:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}(),te=function(){var n=Object(b.a)(d.a.mark((function n(){var r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a("/api/likes","DELETE",JSON.stringify({postId:e.id,userId:t.userId}),{"Content-Type":"application/json",Authorization:"Bearer "+t.token});case 3:r=n.sent,ne(),H(r.res),n.next=10;break;case 8:n.prev=8,n.t0=n.catch(0);case 10:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}(),ne=function(){var n=Object(b.a)(d.a.mark((function n(){var r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a("/api/likes/".concat(t.userId,"/").concat(e.id));case 3:r=n.sent,g(r.disable),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(0);case 9:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();Object(r.useEffect)((function(){var n=function(){var n=Object(b.a)(d.a.mark((function n(){var r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a("/api/likes/".concat(t.userId,"/").concat(e.id));case 3:r=n.sent,g(r.disable),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(0);case 9:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();n()}),[a,t.userId,e.id]),Object(r.useEffect)((function(){function t(){return(t=Object(b.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a("/api/likes/".concat(e.id));case 3:n=t.sent,H(n.likeslength),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[a,e.id]),Object(r.useEffect)((function(){function t(){return(t=Object(b.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a("/api/comments/".concat(e.id));case 3:n=t.sent,R(n.comments),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[a,e.id]),Object(r.useEffect)((function(){var n=function(){var n=Object(b.a)(d.a.mark((function n(){var r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a("/api/favourites/".concat(t.userId,"/").concat(e.id));case 3:r=n.sent,N(r.disable),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(0);case 9:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();n()}),[a,t.userId,e.id]);return console.log(A.length),Object(h.jsxs)("li",{className:"post-item",children:[Object(h.jsxs)(w,{show:u,onCancel:W,header:"Comments",footerClass:"post-item__modal-actions",footer:Object(h.jsx)(c.a.Fragment,{children:Object(h.jsx)("button",{className:"form-btn",style:{marginTop:"0px"},onClick:W,children:"CANCEL"})}),children:[Object(h.jsx)("div",{className:"all-comments",children:Object(h.jsx)(I,{comments:U})}),t.isSignedIn?Object(h.jsxs)("form",{children:[s&&Object(h.jsx)(D,{asOverlay:!0}),Object(h.jsx)("label",{htmlFor:"comment",children:"Comment:"}),Object(h.jsx)("input",{className:"form-control",type:"text",id:"comment",name:"comment",value:A,autoComplete:"off",onChange:function(e){P(e.target.value)}}),Object(h.jsx)("div",{className:"error",children:X.touched.comment&&X.errors.comment?Object(h.jsx)("div",{children:X.errors.comment}):null}),Object(h.jsx)("button",{className:"form-btn",style:{marginTop:"0px"},onClick:Q,disabled:""===A.length,children:"Post"})]}):null]}),Object(h.jsxs)(O,{className:"post-item__content",children:[Object(h.jsx)("div",{className:"post-header",children:Object(h.jsx)(M,{username:e.postusername,userImage:e.userimage})}),null===e.imageUrl?null:Object(h.jsx)("div",{className:"post-item__image",children:Object(h.jsx)("img",{src:"".concat(e.imageUrl),alt:e.comment})}),Object(h.jsxs)("div",{className:"post-item__info",children:[Object(h.jsxs)("h2",{children:[e.title," | ",f()(e.publishDate).format("MMMM Do YYYY")]}),Object(h.jsx)("p",{children:e.postContent})]}),Object(h.jsxs)("div",{className:"post-item__likes",style:{display:"flex",justifyContent:"space-between"},children:[Object(h.jsx)("p",{className:"likes-number",children:0===G?Object(h.jsxs)("div",{className:"set-icons",children:[Object(h.jsx)(z.a,{style:{fontSize:"25px",color:"gray"}}),G]}):Object(h.jsxs)("div",{className:"set-icons",children:[Object(h.jsx)(z.a,{style:{fontSize:"25px",color:"#174ea6"}}),G]})}),Object(h.jsx)("p",{className:"likes-number",style:{marginRight:"5px",display:"".concat(t.isSignedIn?"block":"none")},children:y?Object(h.jsx)(Y.a,{style:{fontSize:"25px",color:"red"},onClick:function(){return $()}}):Object(h.jsx)(Y.a,{style:{fontSize:"25px",color:"gray"},onClick:function(){return Z()}})}),Object(h.jsx)("p",{className:"likes-number",style:{marginRight:"5px"},children:0===U.length?Object(h.jsxs)("div",{className:"set-icons",children:[U.length,Object(h.jsx)(V.a,{style:{fontSize:"25px",color:"gray"}})]}):Object(h.jsxs)("div",{className:"set-icons",children:[U.length,Object(h.jsx)(V.a,{style:{fontSize:"25px",color:"#174ea6"}})]})})]}),Object(h.jsxs)("div",{className:"post-item__actions",children:[Object(h.jsx)("div",{className:"post__option",children:x?Object(h.jsx)("button",{className:"button-17",onClick:t.isSignedIn?te:null,children:"Unlike"}):Object(h.jsx)("button",{className:"button-17",onClick:t.isSignedIn?ee:null,children:"Like"})}),Object(h.jsx)("div",{className:"post__option",children:Object(h.jsx)("button",{className:"button-17",onClick:function(){j(!0)},children:"Comment"})})]})]})]})},H=function(e){var t=Object(r.useContext)(k),n=Object(r.useState)(""),a=Object(o.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(""),l=Object(o.a)(i,2),u=l[0],j=l[1],p=Object(r.useState)(""),x=Object(o.a)(p,2)[1],f=C().sendRequest;Object(r.useEffect)((function(){function e(){return(e=Object(b.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("/api/users/".concat(t.userId));case 3:n=e.sent,j(n.username[0].name),x(n.username[0].imageUrl),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[f,t.userId]);var g=Object(r.useState)(0),v=Object(o.a)(g,2),S=v[0],y=v[1],w=5*S,N=e.items.slice(w,w+5).map((function(e){return Object(h.jsx)(G,{id:e.id,imageUrl:e.imageUrl,title:e.title,publishDate:e.publishDate,postContent:e.content,creatorId:e.userId,username:u,userimage:e.userimageUrl,postusername:e.username},e.id)})),D=Math.ceil(e.items.length/5);return 0===e.items.length?Object(h.jsx)("div",{className:"center",children:Object(h.jsx)(O,{children:Object(h.jsx)("h2",{children:"No Journals To Display. Please Check Back Later"})})}):Object(h.jsxs)("ul",{className:"post-list",children:[Object(h.jsx)("input",{className:"search-bar",type:"text",placeholder:"Search For A Journal By Title...",onChange:function(e){s(e.target.value)}}),""===c&&N,""!==c&&e.items.filter((function(e){return""===c||e.title.toLowerCase().includes(c.toLowerCase())?e:null})).map((function(e){return Object(h.jsx)(G,{id:e.id,imageUrl:e.imageUrl,title:e.title,publishDate:e.publishDate,postContent:e.content,creatorId:e.userId,userimage:e.userimageUrl,postusername:e.username},e.id)})),Object(h.jsx)(m.a,{previousLabel:"Previous",nextLabel:"Next",pageCount:D,onPageChange:function(e){var t=e.selected;y(t)},containerClassName:"paginationBttns",previousLinkClassName:"previousBttn",nextLinkClassName:"nextBttn",disabledClassName:"paginationDisabled",activeClassName:"paginationActive"})]})},W=n(72),Q=n.n(W),K=n(108),X=n.n(K),Z=(n(313),function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(""),i=Object(o.a)(s,2),l=i[0],u=i[1],j=Object(r.useState)(""),p=Object(o.a)(j,2),m=p[0],O=p[1],x=Object(r.useState)([]),g=Object(o.a)(x,2),v=g[0],S=g[1],y=f()(m).format("YYYY-MM-DD"),w=f()(l).format("YYYY-MM-DD"),k=C(),I=k.isLoading,E=k.error,T=k.sendRequest,_=k.clearError;Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T("/api/posts");case 3:t=e.sent,a(t.posts),S(t.posts),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[T]);var F=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==m){e.next=2;break}return e.abrupt("return");case 2:if(""!==l){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,t={startDateFormat:w,endDateFormat:y},e.next=8,Q.a.post("/api/posts/filter",t).then((function(e){S(e.data.result)})).catch((function(e){return console.log(e)}));case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(4);case 12:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(c.a.Fragment,{children:[Object(h.jsx)(N,{error:E,onClear:_}),I&&Object(h.jsx)("div",{className:"center",children:Object(h.jsx)(D,{})}),""===n?null:Object(h.jsx)("section",{className:"Date-picker-wrapper post-list",children:Object(h.jsxs)("div",{className:"Date-picker",children:[Object(h.jsx)(X.a,{onChange:u,value:l,selected:l,dateFormat:"dd/MM/yyyy",placeholderText:"Enter The Start Date",className:"startdate",maxDate:new Date}),Object(h.jsx)("p",{className:"to",children:"to"}),Object(h.jsx)(X.a,{onChange:O,value:m,selected:m,dateFormat:"dd/MM/yyyy",placeholderText:"Enter The End Date",className:"enddate",maxDate:new Date}),Object(h.jsx)("button",{className:"filter-btn",onClick:function(){return F()},disabled:""===m&&""===l,children:"Filter"})]})}),!I&&n&&Object(h.jsx)(H,{items:0!==v.length?n:v})]})}),$=function(){var e=Object(r.useContext)(k),t=Object(l.h)().journalId,n=C(),a=n.isLoading,s=n.error,i=n.sendRequest,u=n.clearError,j=Object(r.useState)(),p=Object(o.a)(j,2),m=p[0],x=p[1],f=Object(l.g)();Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i("/api/posts/".concat(t));case 3:n=e.sent,x(n.post),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[i,t]);var v={title:"",content:""},S=function(){var n=Object(b.a)(d.a.mark((function n(a){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i("/api/posts/".concat(t),"PATCH",JSON.stringify({id:e.userId,title:a.title,content:a.content}),{"Content-Type":"application/json",Authorization:"Bearer "+e.token});case 3:f.push("/"+e.userId+"/journal"),n.next=8;break;case 6:n.prev=6,n.t0=n.catch(0);case 8:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e){return n.apply(this,arguments)}}(),y=T.a({title:T.b().required("Journal Title Cannot Be Empty!"),content:T.b().required("Journal Content Cannot Be Empty!")}),w=Object(E.a)({initialValues:v,enableReinitialize:!0,onSubmit:S,validationSchema:y});return a?Object(h.jsx)("div",{className:"center",children:Object(h.jsx)(D,{})}):(m&&(v.title=m[0].title,v.content=m[0].content),m||s?Object(h.jsxs)(c.a.Fragment,{children:[Object(h.jsx)(N,{error:s,onClear:u}),!a&&m&&Object(h.jsxs)("form",{className:"journal-form",onSubmit:w.handleSubmit,children:[Object(h.jsx)("label",{htmlFor:"title",children:"Title:"}),Object(h.jsx)("input",Object(g.a)({className:"form-control",type:"text",id:"title",name:"title"},w.getFieldProps("title"))),Object(h.jsx)("div",{className:"error",children:w.touched.title&&w.errors.title?Object(h.jsx)("div",{children:w.errors.title}):null}),Object(h.jsx)("label",{htmlFor:"content",children:"Journal Content:"}),Object(h.jsx)("textarea",Object(g.a)({className:"form-control",id:"content",rows:"10",name:"content",placeholder:"Type daily journal here..."},w.getFieldProps("content"))),Object(h.jsx)("div",{className:"error",children:w.touched.content&&w.errors.content?Object(h.jsx)("div",{children:w.errors.content}):null}),Object(h.jsx)("button",{className:"form-btn",type:"submit",disabled:!(w.dirty&&w.isValid),children:"Update Journal"})]})]}):Object(h.jsx)("div",{className:"center",children:Object(h.jsx)(O,{children:Object(h.jsx)("h2",{children:"Could not find journal!"})})}))},ee=(n(356),n(28)),te=(n(152),n(12)),ne=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],c=C().sendRequest;Object(r.useEffect)((function(){function e(){return(e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c("/api/users/");case 3:t=e.sent,a(t.users),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[c]);var s=new Date,i=String(s.getMonth()+1).padStart(2,"0"),l=s.getFullYear();s.setDate(String(s.getDate()).padStart(2,"0"));var u=n.filter((function(e){return e.registerDate.substr(8,2)==="".concat(String(s.getDate()).padStart(2,"0"))})),j=new Date;j.setDate(String(j.getDate()-1).padStart(2,"0"));var p=n.filter((function(e){return e.registerDate.substr(8,2)==="".concat(String(j.getDate()).padStart(2,"0"))})),m=new Date;m.setDate(String(m.getDate()-2).padStart(2,"0"));var O=n.filter((function(e){return e.registerDate.substr(8,2)==="".concat(String(m.getDate()).padStart(2,"0"))})),x=new Date;x.setDate(String(x.getDate()-3).padStart(2,"0"));var f=n.filter((function(e){return e.registerDate.substr(8,2)==="".concat(String(x.getDate()).padStart(2,"0"))})),g=new Date;g.setDate(String(g.getDate()-4).padStart(2,"0"));var v=n.filter((function(e){return e.registerDate.substr(8,2)==="".concat(String(g.getDate()).padStart(2,"0"))})),S=new Date;S.setDate(String(S.getDate()-5).padStart(2,"0"));var y=n.filter((function(e){return e.registerDate.substr(8,2)==="".concat(String(S.getDate()).padStart(2,"0"))})),w=new Date;w.setDate(String(w.getDate()-6).padStart(2,"0"));var N=n.filter((function(e){return e.registerDate.substr(8,2)==="".concat(String(w.getDate()).padStart(2,"0"))})),D=new Date;D.setDate(String(D.getDate()-7).padStart(2,"0"));var k=n.filter((function(e){return e.registerDate.substr(8,2)==="".concat(String(D.getDate()).padStart(2,"0"))})),I=new Date;I.setDate(String(I.getDate()-8).padStart(2,"0"));var E=n.filter((function(e){return e.registerDate.substr(8,2)==="".concat(String(I.getDate()).padStart(2,"0"))})),T=new Date;T.setDate(String(T.getDate()-9).padStart(2,"0"));var _=n.filter((function(e){return e.registerDate.substr(8,2)==="".concat(String(T.getDate()).padStart(2,"0"))})),F=[{year:"".concat(String(s.getDate()).padStart(2,"0")),users:u.length},{year:"".concat(String(j.getDate()).padStart(2,"0")),users:p.length},{year:"".concat(String(m.getDate()).padStart(2,"0")),users:O.length},{year:"".concat(String(x.getDate()).padStart(2,"0")),users:f.length},{year:"".concat(String(g.getDate()).padStart(2,"0")),users:v.length},{year:"".concat(String(S.getDate()).padStart(2,"0")),users:y.length},{year:"".concat(String(w.getDate()).padStart(2,"0")),users:N.length},{year:"".concat(String(D.getDate()).padStart(2,"0")),users:k.length},{year:"".concat(String(I.getDate()).padStart(2,"0")),users:E.length},{year:"".concat(String(T.getDate()).padStart(2,"0")),users:_.length}];return Object(h.jsxs)("div",{className:"card",children:[Object(h.jsxs)(ee.c,{data:F,children:[Object(h.jsx)(ee.a,{}),Object(h.jsx)(ee.e,{max:7}),Object(h.jsx)(ee.b,{valueField:"users",argumentField:"year"}),Object(h.jsx)(ee.d,{text:"Last 10 days User Registeration count of ".concat(i+"/"+l)}),Object(h.jsx)(te.a,{})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("h3",{style:{textAlign:"center"},children:"Total number of Users"}),Object(h.jsx)("p",{children:n.length})]})]})},ae=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],c=C().sendRequest;Object(r.useEffect)((function(){function e(){return(e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c("/api/posts/");case 3:t=e.sent,a(t.posts),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[c]);var s=new Date,i=String(s.getMonth()+1).padStart(2,"0"),l=s.getFullYear();s.setDate(String(s.getDate()).padStart(2,"0"));var u=n.filter((function(e){return e.publishDate.substr(8,2)==="".concat(String(s.getDate()).padStart(2,"0"))})),j=new Date;j.setDate(String(j.getDate()-1).padStart(2,"0"));var p=n.filter((function(e){return e.publishDate.substr(8,2)==="".concat(String(j.getDate()).padStart(2,"0"))})),m=new Date;m.setDate(String(m.getDate()-2).padStart(2,"0"));var O=n.filter((function(e){return e.publishDate.substr(8,2)==="".concat(String(m.getDate()).padStart(2,"0"))})),x=new Date;x.setDate(String(x.getDate()-3).padStart(2,"0"));var f=n.filter((function(e){return e.publishDate.substr(8,2)==="".concat(String(x.getDate()).padStart(2,"0"))})),g=new Date;g.setDate(String(g.getDate()-4).padStart(2,"0"));var v=n.filter((function(e){return e.publishDate.substr(8,2)==="".concat(String(g.getDate()).padStart(2,"0"))})),S=new Date;S.setDate(String(S.getDate()-5).padStart(2,"0"));var y=n.filter((function(e){return e.publishDate.substr(8,2)==="".concat(String(S.getDate()).padStart(2,"0"))})),w=new Date;w.setDate(String(w.getDate()-6).padStart(2,"0"));var N=n.filter((function(e){return e.publishDate.substr(8,2)==="".concat(String(w.getDate()).padStart(2,"0"))})),D=new Date;D.setDate(String(D.getDate()-7).padStart(2,"0"));var k=n.filter((function(e){return e.publishDate.substr(8,2)==="".concat(String(D.getDate()).padStart(2,"0"))})),I=new Date;I.setDate(String(I.getDate()-8).padStart(2,"0"));var E=n.filter((function(e){return e.publishDate.substr(8,2)==="".concat(String(I.getDate()).padStart(2,"0"))})),T=new Date;T.setDate(String(T.getDate()-9).padStart(2,"0"));var _=n.filter((function(e){return e.publishDate.substr(8,2)==="".concat(String(T.getDate()).padStart(2,"0"))})),F=[{year:"".concat(String(s.getDate()).padStart(2,"0")),posts:u.length},{year:"".concat(String(j.getDate()).padStart(2,"0")),posts:p.length},{year:"".concat(String(m.getDate()).padStart(2,"0")),posts:O.length},{year:"".concat(String(x.getDate()).padStart(2,"0")),posts:f.length},{year:"".concat(String(g.getDate()).padStart(2,"0")),posts:v.length},{year:"".concat(String(S.getDate()).padStart(2,"0")),posts:y.length},{year:"".concat(String(w.getDate()).padStart(2,"0")),posts:N.length},{year:"".concat(String(D.getDate()).padStart(2,"0")),posts:k.length},{year:"".concat(String(I.getDate()).padStart(2,"0")),posts:E.length},{year:"".concat(String(T.getDate()).padStart(2,"0")),posts:_.length}];return Object(h.jsxs)("div",{className:"card",children:[Object(h.jsxs)(ee.c,{data:F,children:[Object(h.jsx)(ee.a,{}),Object(h.jsx)(ee.e,{max:7}),Object(h.jsx)(ee.b,{valueField:"posts",argumentField:"year"}),Object(h.jsx)(ee.d,{text:"Last 10 days Published Journals count of ".concat(i+"/"+l)}),Object(h.jsx)(te.a,{})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("h3",{style:{textAlign:"center"},children:"Total number of Journals"}),Object(h.jsx)("p",{children:n.length})]})]})},re=(n(371),n(372),function(e){var t=e.user,n=C().sendRequest,a=Object(r.useContext)(k),s=function(){var e=Object(b.a)(d.a.mark((function e(r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n("/api/users/".concat(r),"PATCH",JSON.stringify({name:t.name,email:t.email,password:t.password,image:"",registerDate:t.registerDate,role:t.role,status:"active"}),{"Content-Type":"application/json",Authorization:"Bearer "+a.token});case 3:localStorage.setItem("status","active"),window.location.href("/admin"),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(b.a)(d.a.mark((function e(r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n("/api/users/".concat(r),"PATCH",JSON.stringify({name:t.name,email:t.email,password:t.password,image:"",registerDate:t.registerDate,role:t.role,status:"deactivated"}),{"Content-Type":"application/json",Authorization:"Bearer "+a.token});case 3:localStorage.setItem("status","deactivate"),window.location.href("/admin"),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(c.a.Fragment,{children:[Object(h.jsxs)("h4",{children:["Right now the status is:",Object(h.jsx)("p",{style:{border:"1px solid gray",padding:"5px",margin:"5px"},children:t.status})]}),Object(h.jsx)("button",{className:"active-btn",onClick:function(){return s(t.id)},children:"Active"}),Object(h.jsx)("button",{className:"deactive-btn",onClick:function(){return i(t.id)},children:"DEACTIVE"})]})}),ce=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(!1),i=Object(o.a)(s,2),l=i[0],u=i[1],j=Object(r.useState)({}),p=Object(o.a)(j,2),m=p[0],O=p[1],x=C(),f=x.sendRequest,g=x.isLoading,v=Object(r.useContext)(k),S=function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("/api/users/".concat(t));case 3:n=e.sent,O(n.username[0]),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:u(!0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){u(!1)};return Object(r.useEffect)((function(){function e(){return(e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("/api/users/");case 3:t=e.sent,a(t.users),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[f]),Object(h.jsxs)(c.a.Fragment,{children:[Object(h.jsx)("h2",{style:{textAlign:"center"},children:"ACTIVE AND DEACTIVE TO USER"}),Object(h.jsx)("div",{style:{overflow:"auto",height:"400px"},children:Object(h.jsxs)("table",{children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{scope:"col",children:"UserName"}),Object(h.jsx)("th",{scope:"col",children:"UserType"}),Object(h.jsx)("th",{scope:"col",children:"UserStatus"}),Object(h.jsx)("th",{scope:"col",children:"UserStatus"}),Object(h.jsx)("th",{scope:"col",children:"Actions"})]})}),Object(h.jsx)("tbody",{children:n.map((function(e){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{"data-label":"Name",children:e.name}),Object(h.jsx)("td",{"data-label":"Role",children:e.role}),Object(h.jsx)("td",{"data-label":"Status",children:e.status}),Object(h.jsx)("td",{"data-label":"Email",children:e.email}),Object(h.jsx)("td",{"data-label":"Action",children:Object(h.jsxs)("div",{style:{marginLeft:"10px"},children:[Object(h.jsx)(w,{show:l,onCancel:y,header:"User Status",footerClass:"post-item__modal-actions",footer:Object(h.jsx)(c.a.Fragment,{children:Object(h.jsx)("button",{className:"form-btn",style:{marginTop:"0px"},onClick:y,children:"CANCEL"})}),children:v.isSignedIn?Object(h.jsxs)("form",{children:[g&&Object(h.jsx)(D,{asOverlay:!0}),Object(h.jsx)("label",{htmlFor:"comment",children:"Change User status:"}),Object(h.jsx)(re,{user:m})]}):null}),Object(h.jsx)("button",{className:"status-btn",onClick:function(){return S(e.id)},children:"Change Status"})]})})]},e.id)}))})]})})]})},se=function(){var e=Object(r.useState)(!0),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(h.jsx)(c.a.Fragment,{children:Object(h.jsxs)("div",{className:"journal-form",children:[n?Object(h.jsx)("button",{className:"deactive-btn",style:{marginBottom:"10px"},onClick:function(){return a(!1)},children:"Check the Graph"}):Object(h.jsx)("button",{className:"active-btn",style:{marginBottom:"10px"},onClick:function(){return a(!0)},children:"Check the Status"}),!n&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(ne,{}),Object(h.jsx)(ae,{})]}),n&&Object(h.jsx)(ce,{})]})})},ie=(n(373),function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(""),i=Object(o.a)(s,2),u=i[0],j=i[1],p=Object(r.useState)(""),m=Object(o.a)(p,2),O=m[0],x=m[1],g=Object(r.useState)(""),v=Object(o.a)(g,2),S=v[0],y=v[1],N=Object(r.useState)(""),I=Object(o.a)(N,2),E=I[0],T=I[1],_=Object(r.useState)(""),F=Object(o.a)(_,2),A=F[0],P=F[1],L=Object(r.useState)(null),J=Object(o.a)(L,2),U=J[0],R=J[1],q=Object(r.useState)(!1),B=Object(o.a)(q,2),M=B[0],Y=B[1],z=Object(r.useState)(!1),V=Object(o.a)(z,2),G=V[0],H=V[1],W=Object(r.useContext)(k),K=Object(l.g)(),X=C(),Z=X.sendRequest,$=X.isLoading,ee=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null!==U){e.next=3;break}return e.abrupt("return");case 3:return(t=new FormData).append("image",U),e.next=7,Q.a.patch("/api/users/image/".concat(W.userId),t).then((function(e){return console.log(e,"res")})).catch((function(e){return console.log(e)}));case 7:window.location.reload(),K.push("/profile"),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z("/api/users/verify/".concat(W.userId),"POST",JSON.stringify({old_password:u}),{"Content-Type":"application/json"});case 3:return t=e.sent,e.abrupt("return",t.verifyPassword);case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te();case 3:if(!e.sent){e.next=24;break}if(T(""),0!==O.length){e.next=9;break}return P("All fields are required"),e.abrupt("return");case 9:if(0!==S.length){e.next=12;break}return P("All fields are required"),e.abrupt("return");case 12:if(!(O.length<8)){e.next=15;break}return P("Password must be contain minimum 8 characters"),e.abrupt("return");case 15:if(O===S){e.next=18;break}return P("Password did not match"),e.abrupt("return");case 18:return e.next=20,Z("/api/users/password/".concat(W.userId),"POST",JSON.stringify({password:O}),{"Content-Type":"application/json"});case 20:window.location.reload(),K.push("/profile"),e.next=26;break;case 24:T("Old Password is Incorrect"),P("");case 26:e.next=30;break;case 28:e.prev=28,e.t0=e.catch(0);case 30:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){function e(){return(e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z("/api/users/".concat(W.userId));case 3:t=e.sent,a(t.username[0]),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[W.userId,Z]);var ae=function(){H(!1),Y(!1)};return Object(h.jsx)(c.a.Fragment,{children:Object(h.jsxs)("div",{className:"journal-form",children:[Object(h.jsx)(w,{show:G,onCancel:ae,header:"Change User Profile",footerClass:"post-item__modal-actions",footer:Object(h.jsx)(c.a.Fragment,{children:Object(h.jsx)("button",{className:"form-btn",style:{marginTop:"0px"},onClick:ae,children:"CANCEL"})}),children:W.isSignedIn?Object(h.jsxs)("div",{className:"journal-form",children:[$&&Object(h.jsx)(D,{asOverlay:!0}),Object(h.jsx)("label",{htmlFor:"image",children:"User Image:"}),Object(h.jsx)("input",{type:"file",name:"image",id:"image",accept:".jpg,.png,.jpeg",onChange:function(e){R(e.target.files[0])}}),Object(h.jsx)("button",{className:"form-btn",onClick:function(){return ee()},children:"Change Image"})]}):null}),Object(h.jsx)(w,{show:M,onCancel:ae,header:"Change User Profile",footerClass:"post-item__modal-actions",footer:Object(h.jsx)(c.a.Fragment,{children:Object(h.jsx)("button",{className:"form-btn",style:{marginTop:"0px"},onClick:ae,children:"CANCEL"})}),children:W.isSignedIn?Object(h.jsxs)("div",{className:"journal-form",children:[$&&Object(h.jsx)(D,{asOverlay:!0}),Object(h.jsx)("label",{htmlFor:"password",children:"Old Password:"}),Object(h.jsx)("input",{className:"form-control",type:"password",id:"oldpassword",name:"oldpassword",autoComplete:"off",value:u,onChange:function(e){return j(e.target.value)}}),Object(h.jsx)("p",{style:{color:"red",fontSize:"15px"},children:E}),Object(h.jsx)("label",{htmlFor:"password",children:"New Password:"}),Object(h.jsx)("input",{className:"form-control",type:"password",id:"n_password",name:"n_password",autoComplete:"off",value:O,onChange:function(e){return x(e.target.value)}}),Object(h.jsx)("label",{htmlFor:"password",children:"Confirm Password:"}),Object(h.jsx)("input",{className:"form-control",type:"password",id:"c_password",name:"c_password",autoComplete:"off",value:S,onChange:function(e){return y(e.target.value)}}),Object(h.jsx)("p",{style:{color:"red",fontSize:"15px"},children:A}),Object(h.jsx)("button",{className:"form-btn",onClick:function(){return ne()},children:"Change Password"})]}):null}),Object(h.jsxs)("div",{className:"pro-card",children:[void 0===n?null:Object(h.jsx)("img",{className:"pro-image",src:"".concat(n.imageUrl),alt:"profile"}),Object(h.jsx)("div",{className:"profile-content",children:Object(h.jsxs)("table",{children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{scope:"col",children:"Name"}),Object(h.jsx)("th",{scope:"col",children:"Register Date"}),Object(h.jsx)("th",{scope:"col",children:"Email"})]})}),Object(h.jsx)("tbody",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{"data-label":"Name",children:n.name}),Object(h.jsx)("td",{"data-label":"Role",children:f()(n.registerDate).format("YYYY-MM-DD")}),Object(h.jsx)("td",{"data-label":"Email",children:n.email})]},n.id)})]})}),Object(h.jsxs)("div",{className:"action-buttons",children:[Object(h.jsx)("button",{className:"button-17",onClick:function(){Y(!0)},children:"Change Password"}),Object(h.jsx)("button",{className:"button-17",onClick:function(){H(!0)},children:"Change Image"})]})]})]})})}),oe=function(){var e=Object(r.useState)(),t=Object(o.a)(e,2),n=t[0],a=t[1],s=C(),i=s.isLoading,u=s.error,j=s.sendRequest,p=s.clearError,m=Object(r.useContext)(k);Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j("/api/favourites/".concat(m.userId),"GET");case 3:t=e.sent,a(t.favourites),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[j,m.userId]);var x=Object(l.g)();return Object(h.jsxs)(c.a.Fragment,{children:[Object(h.jsx)(N,{error:u,onClear:p}),i&&Object(h.jsx)("div",{className:"center",children:Object(h.jsx)(D,{})}),!i&&!n&&Object(h.jsx)("div",{className:"center",children:Object(h.jsxs)(O,{children:[Object(h.jsx)("h2",{children:"No Journals To Favourites"}),Object(h.jsx)("button",{className:"form-btn",type:"submit",onClick:function(){x.push("/journals/new")},children:"Add New Journal"})]})}),!i&&n&&Object(h.jsx)(F,{items:n,onDeletePost:function(e){a((function(t){return t.filter((function(t){return t.id!==e}))}))},display:"none",delete:!0})]})},le=function(){var e,t=Object(r.useState)(!1),n=Object(o.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)(),j=Object(o.a)(i,2),d=j[0],b=j[1],p=Object(r.useState)(!1),m=Object(o.a)(p,2),O=m[0],x=m[1],f=Object(r.useCallback)((function(e,t,n){s(t),x(e);var a=n||new Date((new Date).getTime()+36e5);b(a),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,expiration:a.toISOString()}))}),[]),g=Object(r.useCallback)((function(){s(null),x(null),b(null),localStorage.removeItem("userData"),localStorage.removeItem("role"),localStorage.removeItem("status")}),[]);return Object(r.useEffect)((function(){if(c&&d){var e=d.getTime()-(new Date).getTime();a=setTimeout(g,e)}else clearTimeout(a)}),[c,g,d]),Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&f(e.userId,e.token,new Date(e.expiration))}),[f]),e=c?Object(h.jsxs)(l.d,{children:[Object(h.jsx)(l.b,{path:"/",exact:!0,children:Object(h.jsx)(Z,{})}),Object(h.jsx)(l.b,{path:"/:userId/journal",exact:!0,children:Object(h.jsx)(A,{})}),Object(h.jsx)(l.b,{path:"/journals/new",exact:!0,children:Object(h.jsx)(R,{})}),Object(h.jsx)(l.b,{path:"/journals/:journalId",children:Object(h.jsx)($,{})}),Object(h.jsx)(l.b,{path:"/profile",exact:!0,children:Object(h.jsx)(ie,{})}),Object(h.jsx)(l.b,{path:"/favourite",exact:!0,children:Object(h.jsx)(oe,{})}),"admin"===localStorage.getItem("role")?Object(h.jsx)(l.b,{path:"/admin",exact:!0,children:Object(h.jsx)(se,{})}):Object(h.jsx)(l.a,{to:"/"}),"admin"===localStorage.getItem("role")?Object(h.jsx)(l.a,{to:"/admin"}):Object(h.jsx)(l.a,{to:"/"})]}):Object(h.jsxs)(l.d,{children:[Object(h.jsx)(l.b,{path:"/",exact:!0,children:Object(h.jsx)(Z,{})}),Object(h.jsx)(l.b,{path:"/:userId/journal",exact:!0,children:Object(h.jsx)(A,{})}),Object(h.jsx)(l.b,{path:"/auth",children:Object(h.jsx)(q,{})}),Object(h.jsx)(l.b,{path:"*",children:Object(h.jsx)(q,{})})]}),Object(h.jsx)(k.Provider,{value:{isSignedIn:!!c,token:c,userId:O,signIn:f,signOut:g},children:Object(h.jsxs)(u.a,{children:[Object(h.jsx)(U,{}),Object(h.jsx)("main",{children:e})]})})};i.a.render(Object(h.jsx)(le,{}),document.getElementById("root"))}},[[375,1,2]]]);
//# sourceMappingURL=main.ce4c3775.chunk.js.map